# Firestore å®‰å…¨è¦å‰‡è¨­ç½®æŒ‡å—

## å•é¡Œèªªæ˜
ç•¶å‰æ‡‰ç”¨ç„¡æ³•é€£æ¥åˆ° Firestoreï¼Œå› ç‚ºç¼ºå°‘å®‰å…¨è¦å‰‡é…ç½®ã€‚éŒ¯èª¤ä¿¡æ¯ï¼š`[cloud_firestore/permission-denied]`

## è§£æ±ºæ–¹æ³•

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Firebase æ§åˆ¶å°ï¼ˆæ¨è–¦ï¼‰

1. **æ‰“é–‹ Firebase æ§åˆ¶å°**
   - è¨ªå• https://console.firebase.google.com/
   - é¸æ“‡é …ç›®ï¼š`strengthwise-91f02`

2. **é€²å…¥ Firestore è¦å‰‡è¨­ç½®**
   - é»æ“Šå·¦å´èœå–®çš„ "Firestore Database"
   - é¸æ“‡ "è¦å‰‡" æ¨™ç±¤

3. **è¤‡è£½ä¸¦è²¼ä¸Šè¦å‰‡**
   - æ‰“é–‹é …ç›®æ ¹ç›®éŒ„çš„ `firestore.rules` æ–‡ä»¶
   - è¤‡è£½æ‰€æœ‰å…§å®¹
   - è²¼åˆ° Firebase æ§åˆ¶å°çš„è¦å‰‡ç·¨è¼¯å™¨ä¸­
   - é»æ“Š "ç™¼å¸ƒ" æŒ‰éˆ•

### æ–¹æ³•äºŒï¼šä½¿ç”¨ Firebase CLI

1. **å®‰è£ Firebase CLI**
   ```bash
   npm install -g firebase-tools
   ```

2. **ç™»å…¥ Firebase**
   ```bash
   firebase login
   ```

3. **åˆå§‹åŒ–é …ç›®ï¼ˆå¦‚æœé‚„æ²’æœ‰ï¼‰**
   ```bash
   firebase init firestore
   ```

4. **éƒ¨ç½²è¦å‰‡**
   ```bash
   firebase deploy --only firestore:rules
   ```

## è¦å‰‡èªªæ˜

ç•¶å‰è¦å‰‡é…ç½®ï¼š
- âœ… `exerciseTypes` - å…¬é–‹è®€å–ï¼ˆæ‰€æœ‰ç”¨æˆ¶å¯è®€ï¼‰
- âœ… `bodyParts` - å…¬é–‹è®€å–ï¼ˆæ‰€æœ‰ç”¨æˆ¶å¯è®€ï¼‰
- âœ… `exercises` - å…¬é–‹è®€å–ï¼ˆæ‰€æœ‰ç”¨æˆ¶å¯è®€ï¼‰
- ğŸ”’ `users` - éœ€è¦èªè­‰ï¼Œåªèƒ½è¨ªå•è‡ªå·±çš„æ•¸æ“š
- ğŸ”’ `workoutPlans` - éœ€è¦èªè­‰ï¼Œåªèƒ½è¨ªå•è‡ªå·±çš„è¨ˆåŠƒ
- ğŸ”’ `bookings` - éœ€è¦èªè­‰ï¼Œåªèƒ½è¨ªå•ç›¸é—œé ç´„

## é–‹ç™¼ç’°å¢ƒè‡¨æ™‚è¦å‰‡ï¼ˆåƒ…ç”¨æ–¼æ¸¬è©¦ï¼‰

å¦‚æœéœ€è¦å®Œå…¨é–‹æ”¾ï¼ˆåƒ…ç”¨æ–¼é–‹ç™¼æ¸¬è©¦ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ï¼š

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
```

**âš ï¸ è­¦å‘Šï¼šæ­¤è¦å‰‡å…è¨±ä»»ä½•äººè®€å¯«æ‰€æœ‰æ•¸æ“šï¼Œåƒ…ç”¨æ–¼é–‹ç™¼æ¸¬è©¦ï¼Œçµ•ä¸èƒ½ç”¨æ–¼ç”Ÿç”¢ç’°å¢ƒï¼**

## é©—è­‰è¦å‰‡

éƒ¨ç½²è¦å‰‡å¾Œï¼Œé‡æ–°é‹è¡Œæ‡‰ç”¨ç¨‹åºï¼Œæ‡‰è©²å¯ä»¥æ­£å¸¸è¨ªå• Firestore æ•¸æ“šäº†ã€‚

## æ•…éšœæ’é™¤

å¦‚æœä»ç„¶é‡åˆ°æ¬Šé™å•é¡Œï¼š
1. æª¢æŸ¥ Firebase é …ç›®æ˜¯å¦æ­£ç¢ºï¼ˆ`strengthwise-91f02`ï¼‰
2. æª¢æŸ¥ `google-services.json` æ˜¯å¦åœ¨æ­£ç¢ºä½ç½®ï¼ˆ`android/app/`ï¼‰
3. æª¢æŸ¥ `firebase_options.dart` ä¸­çš„é …ç›®IDæ˜¯å¦åŒ¹é…
4. æ¸…é™¤æ‡‰ç”¨ç·©å­˜ä¸¦é‡æ–°å®‰è£

