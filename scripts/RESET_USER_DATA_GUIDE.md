# 用戶數據重置與假資料生成指南

## 目標
- 刪除用戶 `d1798674-0b96-4c47-a7c7-ee20a5372a03` 的所有數據
- 生成專業的假訓練資料（推拉腿分化）

## 準備工作

1. **確保 `.env` 文件存在**並包含以下內容：
```
SUPABASE_URL=你的_Supabase_URL
SUPABASE_SERVICE_ROLE_KEY=你的_Service_Role_Key
```

2. **安裝 Python 依賴**：
```bash
pip install supabase python-dotenv
```

## 執行方式

### 方式 1：互動式執行（推薦）

```bash
python scripts/reset_user_data_and_generate.py d1798674-0b96-4c47-a7c7-ee20a5372a03
```

會提示確認後執行。

### 方式 2：自動確認模式

```bash
python scripts/reset_user_data_and_generate.py d1798674-0b96-4c47-a7c7-ee20a5372a03 --auto-confirm
```

跳過確認直接執行。

### 方式 3：使用批次腳本（Windows）

```bash
scripts\reset_and_generate.bat
```

會有友善的提示介面。

## 執行流程

腳本將執行以下步驟：

### 步驟 1：刪除現有數據
- 刪除用戶的所有訓練計劃（`workout_plans`）
- 刪除用戶的自定義動作（`exercises`）
- 刪除用戶的預約記錄（`appointments`）

### 步驟 2：獲取真實動作
從 Supabase 資料庫獲取以下類型的動作：
- **胸部**：臥推、上斜推舉、飛鳥
- **背部**：硬舉、引體向上、划船、滑輪下拉
- **腿部**：深蹲、腿推、腿彎舉、腿伸展
- **肩部**：肩推、側平舉、前平舉
- **手臂**：二頭彎舉、三頭肌伸展

### 步驟 3：生成訓練記錄（一個月）
- 時間範圍：過去 30 天
- 訓練分化：**推拉腿（PPL）**循環
  - **推日**：胸、肩、三頭（6 個動作）
  - **拉日**：背、二頭（5 個動作）
  - **腿日**：下肢（4 個動作）
- 訓練頻率：每週 4-5 天（週日休息 + 隨機休息）
- 漸進式超負荷：每週重量進步 2.5%

### 步驟 4：生成訓練模板（一周）
- 時間範圍：下週（從下週一開始）
- 5 個訓練模板（未完成狀態）：
  - 週一：胸肩三頭
  - 週二：背二頭
  - 週三：腿部
  - 週五：胸肩三頭（重複）
  - 週六：背二頭（重複）

## 預期輸出

成功執行後你會看到：

```
============================================================
StrengthWise - 用戶數據重置與假資料生成工具
============================================================
目標用戶: d1798674-0b96-4c47-a7c7-ee20a5372a03
執行時間: 2024-12-26 20:30:00

============================================================
步驟 1: 刪除現有數據
============================================================
正在刪除用戶的訓練計劃...
  ✅ 已刪除訓練計劃
正在刪除用戶的自定義動作...
  ✅ 已刪除自定義動作
正在刪除用戶的預約記錄...
  ✅ 已刪除預約記錄

✅ 所有數據已清空！

============================================================
步驟 2: 獲取真實動作
============================================================
  ✅ bench_press: 推／胸推／地板臥推／槓鈴，推舉
  ✅ incline_press: 推／胸推／斜板臥推／啞鈴，上斜...
  ... (共 15 個動作)

✅ 成功獲取 15 個動作

============================================================
步驟 3: 生成訓練記錄（一個月）
============================================================
  ✅ 2024-11-26: 胸肩三頭訓練 (6 個動作)
  ✅ 2024-11-27: 背二頭訓練 (5 個動作)
  ✅ 2024-11-29: 腿部訓練 (4 個動作)
  ... (約 20+ 筆記錄)

✅ 完成！共創建 22 筆訓練記錄

============================================================
步驟 4: 生成訓練模板（一周）
============================================================
  ✅ 12/30 (Mon): 週一 - 胸肩三頭 (6 個動作)
  ✅ 12/31 (Tue): 週二 - 背二頭 (5 個動作)
  ... (共 5 個模板)

✅ 完成！共創建 5 個訓練模板

============================================================
🎉 完成！數據已重置並生成假資料
============================================================

訓練計劃：
  - 訓練記錄：過去 30 天的訓練（推拉腿分化）
  - 訓練模板：下週 5 天的訓練計劃

訓練特點：
  - 漸進式超負荷（每週進步 2.5%）
  - 專業的組數與次數設定
  - 真實的動作資料
```

## 訓練計劃細節

### 推日（胸肩三頭）
1. **槓鈴臥推** - 5 組 x 8 次 @ 60kg（主要動作）
2. **上斜啞鈴推舉** - 4 組 x 10 次 @ 22kg
3. **胸部飛鳥** - 3 組 x 12 次 @ 15kg
4. **肩推** - 4 組 x 10 次 @ 18kg
5. **側平舉** - 3 組 x 12 次 @ 8kg
6. **三頭肌伸展** - 3 組 x 12 次 @ 12kg

### 拉日（背二頭）
1. **硬舉** - 5 組 x 6 次 @ 80kg（主要動作）
2. **引體向上** - 4 組 x 8 次（體重）
3. **槓鈴划船** - 4 組 x 10 次 @ 50kg
4. **滑輪下拉** - 3 組 x 12 次 @ 45kg
5. **二頭彎舉** - 3 組 x 12 次 @ 12kg

### 腿日
1. **深蹲** - 5 組 x 8 次 @ 80kg（主要動作）
2. **腿推** - 4 組 x 10 次 @ 120kg
3. **腿彎舉** - 3 組 x 12 次 @ 35kg
4. **腿伸展** - 3 組 x 12 次 @ 40kg

## 漸進式超負荷

每週重量會自動增加 2.5%：
- Week 1: 基礎重量（100%）
- Week 2: +2.5%
- Week 3: +5.0%
- Week 4: +7.5%

例如：臥推從 60kg → 61.5kg → 63kg → 64.5kg

## 故障排除

### 錯誤：找不到動作
如果提示 `⚠️ 找不到包含 'XXX' 的動作`，表示資料庫中缺少該類型動作。腳本會跳過該動作繼續執行。

### 錯誤：插入失敗
檢查：
1. Supabase 連線是否正常
2. 用戶 ID 是否正確
3. RLS 政策是否允許插入

### 環境變數未載入
確保：
1. `.env` 文件在專案根目錄
2. 文件名稱正確（不是 `.env.txt`）
3. 內容格式正確（無多餘空格）

## 注意事項

⚠️ **重要**：
- 此操作會 **永久刪除** 該用戶的所有訓練數據
- 建議先備份重要數據
- 僅在測試環境或確定要重置時使用

## 完成後驗證

在 StrengthWise App 中：
1. 進入「首頁」查看今日訓練和最近記錄
2. 進入「訓練」頁面查看下週的訓練模板
3. 進入「統計」頁面查看訓練數據圖表

應該能看到：
- 首頁顯示最近 5 筆訓練記錄
- 訓練頁面顯示 5 個未來的訓練模板
- 統計頁面顯示過去一個月的訓練趨勢

---

**工具版本**: v1.0.0  
**最後更新**: 2024-12-26  
**作者**: StrengthWise 開發團隊

